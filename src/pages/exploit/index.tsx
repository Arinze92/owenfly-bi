import { PageContainer } from '@ant-design/pro-layout';
import { Col, Row, Collapse, Input, Image, Button } from 'antd';
import { CheckCard } from '@ant-design/pro-components';
import styles from './style.less';
import { useState } from 'react';
const { Panel } = Collapse;
const { Search } = Input;
export default () => {
  const [activeKey, setActiveKey] = useState(1);
  const [selectList, setSelectList] = useState([]);
  const [kanbanList, setKanbanList] = useState([
    {
      id: 2,
      url: 'https://img0.baidu.com/it/u=1793887084,2705047649&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500',
      title: '柱状图',
      del: true,
      hide: true,
    },
    {
      id: 3,
      url: 'https://img0.baidu.com/it/u=1793887084,2705047649&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500',
      title: '柱状图',
      del: true,
      hide: true,
    },
    {
      id: 4,
      url: 'https://img0.baidu.com/it/u=1793887084,2705047649&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500',
      title: '柱状图',
      del: true,
      hide: true,
    },
  ]);
  const collapseList = [
    {
      id: 1,
      title: '智慧能耗',
      flag: true,
      children: [
        {
          id: 2,
          url: 'https://img0.baidu.com/it/u=1793887084,2705047649&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500',
          title: '柱状图',
        },
        {
          id: 3,
          url: 'https://img0.baidu.com/it/u=1793887084,2705047649&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500',
          title: '柱状图',
        },
      ],
    },
    {
      id: 2,
      title: '园区招聘',
      flag: true,
      children: [
        {
          id: 6,
          url: 'https://img0.baidu.com/it/u=1793887084,2705047649&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500',
          title: '柱状图',
        },
        {
          id: 7,
          url: 'https://img0.baidu.com/it/u=1793887084,2705047649&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500',
          title: '柱状图',
        },
      ],
    },
    {
      id: 3,
      title: '安防警告',
      flag: true,
      children: [
        {
          id: 16,
          url: 'https://img0.baidu.com/it/u=1793887084,2705047649&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500',
          title: '柱状图',
        },
        {
          id: 17,
          url: 'https://img0.baidu.com/it/u=1793887084,2705047649&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500',
          title: '柱状图',
        },
      ],
    },
  ];
  const onSearch = (value: string) => {
    collapseList.map((item) => {
      if (item.title == value) {
        setActiveKey(item.id);
      }
    });
  };

  const isHide = () => {
    if (selectList.length) {
      kanbanList.map((item) => {
        if (selectList.includes(item.id)) {
          item.hide = false;
        }
      });
      setKanbanList(kanbanList);
      setSelectList([]);
    }
  };
  const empty = () => {
    setKanbanList([]);
    setSelectList([]);
  };
  const onDel = () => {
    if (selectList.length) {
      const newArr = kanbanList.filter((v) => selectList.every((val) => val != v.id));
      setKanbanList(newArr);
      setSelectList([]);
    }
  };

  return (
    <PageContainer>
      <Row gutter={16} className={styles.SpaceCenter}>
        <Col className={styles.gutter_left} span={6}>
          <h1 className={styles.title}>
            <span className={styles.leftcol}></span>指标库
          </h1>
          <Search
            placeholder="请输入指标名称搜索"
            onSearch={onSearch}
            enterButton
            className={styles.input_search}
          />
          <Collapse
            defaultActiveKey={[]}
            ghost
            accordion
            activeKey={activeKey}
            expandIconPosition="right"
            className="collapse"
            onChange={(e) => {
              setActiveKey(e);
              console.log(e, 'e');
            }}
          >
            {collapseList.map((item, index) => {
              return (
                <Panel header={item.title} key={item.id}>
                  <Row>
                    {item.children.map((i) => {
                      return (
                        <Col span={12} className={styles.col} key={i.id}>
                          <Image
                            onDoubleClick={() => {
                              // let arr = [];
                              // arr.push({ ...i, hide: true });
                              console.log('kanbanList:', kanbanList);
                              setKanbanList([
                                ...kanbanList,
                                { ...i, hide: true, id: Math.floor(Math.random() * 100) },
                              ]);
                              console.log('我背点击了 ', i);
                            }}
                            preview={false}
                            width={100}
                            src={i.url}
                          />
                          <p>{i.title}</p>
                        </Col>
                      );
                    })}
                  </Row>
                </Panel>
              );
            })}
            {/* <Panel header="智慧能耗" key="1">
              <Row>
                <Col span={12} className={styles.col}>
                  <Image
                    onDoubleClick={() => {
                      console.log('我背点击了 ');
                    }}
                    preview={false}
                    width={100}
                    src="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"
                  />
                  <p>柱状图</p>
                </Col>
                <Col span={12} className={styles.col}>
                  <Image
                    preview={false}
                    width={100}
                    src="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"
                  />
                  <p>柱状图</p>
                </Col>
                <Col span={12} className={styles.col}>
                  <Image
                    preview={false}
                    width={100}
                    src="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"
                  />
                  <p>柱状图</p>
                </Col>
              </Row>
            </Panel>
            <Panel header="园区招聘" key="2">
              <Row>
                <Col span={12} className={styles.col}>
                  <Image
                    preview={false}
                    width={100}
                    src="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"
                  />
                  <p>柱状图</p>
                </Col>
                <Col span={12} className={styles.col}>
                  <Image
                    preview={false}
                    width={100}
                    src="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"
                  />
                  <p>柱状图</p>
                </Col>
                <Col span={12} className={styles.col}>
                  <Image
                    preview={false}
                    width={100}
                    src="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"
                  />
                  <p>柱状图</p>
                </Col>
              </Row>
            </Panel>
            <Panel header="安防警告" key="3">
              <Row>
                <Col span={12} className={styles.col}>
                  <Image
                    preview={false}
                    width={100}
                    src="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"
                  />
                  <p>柱状图</p>
                </Col>
                <Col span={12} className={styles.col}>
                  <Image
                    preview={false}
                    width={100}
                    src="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"
                  />
                  <p>柱状图</p>
                </Col>
                <Col span={12} className={styles.col}>
                  <Image
                    preview={false}
                    width={100}
                    src="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"
                  />
                  <p>柱状图</p>
                </Col>
              </Row>
            </Panel> */}
          </Collapse>
        </Col>
        <Col className={styles.gutter_right} span={18}>
          <div className={styles.right_top}>
            <h1 className={styles.title}>
              <span className={styles.leftcol}></span> 自定义看板
            </h1>
            <div className={styles.btnbox}>
              <Button className={styles.btn} onClick={isHide}>
                选中隐藏
              </Button>
              <Button className={styles.btn}>选中恢复</Button>
              <Button className={styles.btn} onClick={onDel}>
                删除
              </Button>
              <Button className={styles.btn} onClick={empty}>
                清空
              </Button>
              <Button type="primary" className={styles.btn}>
                保存
              </Button>
            </div>
          </div>
          <CheckCard.Group
            multiple
            style={{ width: '100%' }}
            size="small"
            onChange={(value) => {
              console.log('kanbanList1:', kanbanList);
              console.log('value', value);
              setSelectList(value);
            }}
          >
            <Row>
              {kanbanList.map((item) => {
                return item.hide ? (
                  <Col span={6} className={styles.col} key={item.id}>
                    <CheckCard
                      value={item.id}
                      cover={
                        <Image
                          alt=""
                          height={200}
                          width={200}
                          style={{ padding: '10px' }}
                          preview={false}
                          src={item.url}
                        />
                      }
                    />
                    <p>{item.title}</p>
                  </Col>
                ) : null;
              })}
              {/* <Col span={6} className={styles.col}>
                <CheckCard
                  value="a"
                  cover={
                    <Image
                      alt="example"
                      height={200}
                      width={200}
                      style={{ padding: '10px' }}
                      preview={false}
                      src="https://gw.alipayobjects.com/mdn/rms_66ee3f/afts/img/A*FyH5TY53zSwAAAAAAAAAAABkARQnAQ"
                    />
                  }
                />
                <p>柱状图</p>
              </Col>
              <Col span={6} className={styles.col}>
                <CheckCard
                  value="y"
                  cover={
                    <Image
                      alt="example"
                      preview={false}
                      height={200}
                      width={200}
                      style={{ padding: '10px' }}
                      src="https://gw.alipayobjects.com/mdn/rms_66ee3f/afts/img/A*FyH5TY53zSwAAAAAAAAAAABkARQnAQ"
                    />
                  }
                />
                <p>柱状图</p>
              </Col>
              <Col span={6} className={styles.col}>
                <CheckCard
                  value="q"
                  cover={
                    <Image
                      alt="example"
                      preview={false}
                      style={{ padding: '10px' }}
                      height={200}
                      width={200}
                      src="https://gw.alipayobjects.com/mdn/rms_66ee3f/afts/img/A*FyH5TY53zSwAAAAAAAAAAABkARQnAQ"
                    />
                  }
                />
                <p>柱状图</p>
              </Col>
              <Col span={6} className={styles.col}>
                <CheckCard
                  value="v"
                  cover={
                    <Image
                      alt="example"
                      preview={false}
                      height={200}
                      width={200}
                      style={{ padding: '10px' }}
                      src="https://gw.alipayobjects.com/mdn/rms_66ee3f/afts/img/A*FyH5TY53zSwAAAAAAAAAAABkARQnAQ"
                    />
                  }
                />
                <p>柱状图</p>
              </Col>
              <Col span={6} className={styles.col}>
                <CheckCard
                  value="w"
                  cover={
                    <Image
                      alt="example"
                      preview={false}
                      height={200}
                      width={200}
                      style={{ padding: '10px' }}
                      src="https://gw.alipayobjects.com/mdn/rms_66ee3f/afts/img/A*FyH5TY53zSwAAAAAAAAAAABkARQnAQ"
                    />
                  }
                />
                <p>柱状图</p>
              </Col> */}
            </Row>
          </CheckCard.Group>
        </Col>
      </Row>
    </PageContainer>
  );
};
